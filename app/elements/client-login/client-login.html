<link rel='import' href='../../bower_components/polymer/polymer.html'>
<link rel='import' href='../../bower_components/paper-button/paper-button.html'>
<link rel='import' href='../../bower_components/paper-input/paper-input.html'>

<dom-module id='client-login'>
  <template>
    <style include='shared-styles'></style>

    <div class='primary'>
      <paper-input id='user' label='Usuario' required auto-validate error-message='campo obligatorio' on-blur='idChanged'></paper-input>
      <paper-input id='password' label='Password' type='password' required auto-validate error-message='campo obligatorio'></paper-input><br><br>
      <a id='loginLink'>
        <paper-button id='btnLogin' raisedButton class='custom indigo' onclick='login()'>Login</paper-button>
      </a>
    </div>
    <br><br>
    <div class='primary'>
      <a href='/client/new'>Si desea crear un usuario nuevo pulse el link</a>
    </div>

  </template>

  <script>
    (function() {
      'use strict';

      Polymer({
          is: 'client-login',
          properties: {
            userId: {
              type:String,
              notify: true
            }
          },
          idChanged: function(e){
              this.userId = e.target.value;
          }
      });
    })();

    function login() {
      var element = document.getElementById('loginLink');
//      var request = new XMLHttpRequest();
//      request.onreadystatechange = function() {
//        if (request.readyState === 4) {
//          if (request.status === 200) {
//            document.body.className = 'ok';
//          } else {
//            document.body.className = 'error';
//          }
//        }
//      };
//      request.open('GET', hostUrl+'/client/'+document.getElementById('user').value , true);
//      request.send(null);
      element.href = '/client/'+document.getElementById('user').value;
    }

  </script>

</dom-module>
