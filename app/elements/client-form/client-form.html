<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">

<dom-module id="client-form">
  <template>
    <style include="shared-styles"></style>

    <div class="primary">
      <paper-input id='userReg' label='Usuario' required auto-validate error-message='campo obligatorio' on-blur='idChanged'></paper-input>
      <paper-input id='passwordReg' label='Password' type='password' required auto-validate error-message='campo obligatorio'></paper-input>
      <paper-input label='Nombre' required auto-validate error-message='campo obligatorio'></paper-input>
      <paper-input label='Apellidos' required auto-validate error-message='campo obligatorio'></paper-input>
      <paper-input label='Edad' required auto-validate error-message='campo obligatorio'></paper-input>
      <paper-input label='Email' required auto-validate error-message='campo obligatorio'></paper-input>
      <paper-input label='MÃ³vil' required auto-validate error-message='campo obligatorio'></paper-input><br><br>
      <a id='registerLink'>
        <paper-button id='btnRegister' raisedButton class='custom indigo' onclick='register()'>Registrar</paper-button>
      </a>
    </div>

  </template>

  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'client-form',
        properties: {
          userId: {
            type:String,
            notify: true
          }
        },
        idChanged: function(e){
          this.userId = e.target.value;
        }
      });
    })();

    function register() {
      var element = document.getElementById('registerLink');
      var request = new XMLHttpRequest();
      request.onreadystatechange = function() {
        if (request.readyState === 4) {
          if (request.status === 200) {
            document.body.className = 'ok';
          } else {
            document.body.className = 'error';
          }
        }
      };
      request.open('GET', hostUrl+'/client/'+document.getElementById('userReg').value , true);
      request.send(null);
      element.href = '/client/'+document.getElementById('userReg').value;
    }
  </script>

</dom-module>
